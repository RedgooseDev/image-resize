!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.ResizeImage=n()}(this,function(){"use strict";function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:320,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:240,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#ffffff";this.el=document.createElement("canvas"),this.ctx=this.el.getContext("2d"),this.el.width=t,this.el.height=n,this.ctx.fillStyle=e,this.ctx.fillRect(0,0,t,n)}function n(t){return new Promise(function(n){if(t){var e=new Image;e.onload=function(t){n(e)},e.onError=function(t){n(null)},console.warn(t),e.setAttribute("crossOrigin","anonymous"),e.src=t}else n(null)})}var e={quality:.75,format:"jpg",width:320,height:240,reSample:2,bgColor:"#ff0000"},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){function t(t){this.value=t}function n(n){function e(r,i){try{var u=n[r](i),c=u.value;c instanceof t?Promise.resolve(c.value).then(function(t){e("next",t)},function(t){e("throw",t)}):o(u.done?"return":"normal",u.value)}catch(t){o("throw",t)}}function o(t,n){switch(t){case"return":r.resolve({value:n,done:!0});break;case"throw":r.reject(n);break;default:r.resolve({value:n,done:!1})}(r=r.next)?e(r.key,r.arg):i=null}var r,i;this._invoke=function(t,n){return new Promise(function(o,u){var c={key:t,arg:n,resolve:o,reject:u,next:null};i?i=i.next=c:(r=i=c,e(t,n))})},"function"!=typeof n.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(n.prototype[Symbol.asyncIterator]=function(){return this}),n.prototype.next=function(t){return this._invoke("next",t)},n.prototype.throw=function(t){return this._invoke("throw",t)},n.prototype.return=function(t){return this._invoke("return",t)}}();return function(r){var i=Object.assign({},e,r);console.warn("options",i),this.play=function(t,n){i=Object.assign({},i,n),console.log("action play"),"string"==typeof t||"object"===(void 0===t?"undefined":o(t))&&console.log(t.files)},this.srcToCanvas=function(t){return new Promise(function(e,o){n(t).then(function(t){document.querySelector("main").appendChild(t)})})},this.formToCanvas=function(n){var e=null;return new Promise(function(o,r){function u(t){console.log("error event"),r()}var c=new FileReader;c.onload=function(n){var r=new Image;r.onload=function(){(e=new t(r.width,r.height,i.bgColor)).ctx.drawImage(r,0,0),o(e)},r.onerror=u,r.src=n.target.result},c.onerror=u,c.readAsDataURL(n.target.files[0])})}}});

!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.ResizeImage=n()}(this,function(){"use strict";function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:320,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:240,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#ffffff";this.el=document.createElement("canvas"),this.ctx=this.el.getContext("2d"),this.el.width=e,this.el.height=n,this.ctx.fillStyle=t,this.ctx.fillRect(0,0,e,n)}function n(e){return new Promise(function(n){if(e){var t=new Image;t.onload=function(e){n(t)},t.onError=function(e){n(null)},console.warn(e),t.setAttribute("crossOrigin","anonymous"),t.src=e}else n(null)})}var t={quality:.75,format:"jpg",width:320,height:240,reSample:2,bgColor:"#ff0000"};return function(o){var i=Object.assign({},t,o);console.log("options",i),this.play=function(){},this.srcToCanvas=function(e,t){return i=Object.assign({},i,t),new Promise(function(t,o){n(e).then(function(e){document.querySelector("main").appendChild(e)})})},this.formToCanvas=function(n,t){function o(e){console.log("error event")}var r=null;return new Promise(function(t,s){var l=new FileReader;l.onload=function(n){var s=new Image;s.onload=function(){(r=new e(s.width,s.height,i.bgColor)).ctx.drawImage(s,0,0),t(r)},s.onerror=o,s.src=n.target.result},l.onerror=o,l.readAsDataURL(n.target.files[0])})}}});

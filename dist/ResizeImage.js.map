{"version":3,"file":"ResizeImage.js","sources":["../src/parts/Canvas.js","../src/parts/events.js","../src/parts/defaultOptions.js","../src/ResizeImage.js"],"sourcesContent":["/**\n * Canvas\n *\n * @param {Number} width\n * @param {Number} height\n * @param {String} bgColor\n */\nexport default function Canvas(width=320, height=240, bgColor='#ffffff') {\n\n\tthis.el = document.createElement('canvas');\n\tthis.ctx = this.el.getContext('2d');\n\n\tthis.el.width = width;\n\tthis.el.height = height;\n\n\tthis.ctx.fillStyle = bgColor;\n\tthis.ctx.fillRect(0, 0, width, height);\n\n}\n","/**\n * load image\n *\n * @param {String} src\n * @return {Promise}\n */\nexport function loadImage(src)\n{\n\treturn new Promise((resolve) => {\n\t\tif (src)\n\t\t{\n\t\t\tlet image = new Image();\n\n\t\t\timage.onload = function(e)\n\t\t\t{\n\t\t\t\tresolve(image);\n\t\t\t};\n\t\t\timage.onError = function(e)\n\t\t\t{\n\t\t\t\tresolve(null);\n\t\t\t};\n\n\t\t\tconsole.warn(src);\n\t\t\timage.setAttribute('crossOrigin', 'anonymous');\n\t\t\timage.src = src;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tresolve(null);\n\t\t}\n\t});\n}","export const base = {\n\n\tquality: .75,\n\tformat: 'jpg', // png,jpg\n\twidth: 320,\n\theight: 240,\n\treSample: 2,\n\tbgColor: '#ff0000',\n\n};","import Canvas from './parts/Canvas';\nimport * as events from './parts/events';\nimport * as defaultOptions from './parts/defaultOptions';\n\n\n/**\n * Resize image\n *\n * @param {Object} options\n */\nfunction ResizeImage(options) {\n\n\t// assign options\n\tlet option = Object.assign({}, defaultOptions.base, options);\n\n\n\tconsole.log('options', option);\n\n\tthis.play = function()\n\t{\n\n\t};\n\n\t/**\n\t * Play convert\n\t * 이미지 주소로 캔버스로 변환\n\t *\n\t * @param {String} src\n\t * @param {Object} options\n\t * @return {Promise}\n\t */\n\tthis.srcToCanvas = function(src, options)\n\t{\n\t\t// assign options\n\t\toption = Object.assign({}, option, options);\n\n\t\t// TODO : 이미지 url로 입력했을때 이미지를 가져와서 리사이즈를 하기\n\t\treturn new Promise(function(resolve, reject) {\n\t\t\tevents.loadImage(src).then(function(image) {\n\t\t\t\tdocument.querySelector('main').appendChild(image);\n\t\t\t});\n\t\t});\n\t};\n\n\t/**\n\t * Upload to image\n\t * 첨부로 가져온 이미지를 캔버스로 변환\n\t *\n\t * @param {HTMLElement} element\n\t * @param {Object} options\n\t * @return {Promise}\n\t */\n\tthis.formToCanvas = function(element, options)\n\t{\n\t\tfunction error(e)\n\t\t{\n\t\t\tconsole.log('error event');\n\t\t}\n\n\t\tlet canvas = null;\n\t\treturn new Promise(function(resolve, reject) {\n\t\t\tconst reader = new FileReader();\n\t\t\treader.onload = function(e)\n\t\t\t{\n\t\t\t\tconst img = new Image();\n\t\t\t\timg.onload = function()\n\t\t\t\t{\n\t\t\t\t\tcanvas = new Canvas(img.width, img.height, option.bgColor);\n\t\t\t\t\tcanvas.ctx.drawImage(img, 0, 0);\n\t\t\t\t\tresolve(canvas);\n\t\t\t\t};\n\t\t\t\timg.onerror = error;\n\t\t\t\timg.src = e.target.result;\n\t\t\t};\n\t\t\treader.onerror = error;\n\t\t\treader.readAsDataURL(element.target.files[0]);\n\t\t});\n\t};\n\n}\n\n\nexport default ResizeImage;"],"names":["Canvas","width","height","bgColor","el","document","createElement","ctx","getContext","fillStyle","fillRect","loadImage","src","Promise","resolve","image","Image","onload","e","onError","warn","setAttribute","base","ResizeImage","options","option","Object","assign","defaultOptions","log","play","srcToCanvas","reject","then","querySelector","appendChild","formToCanvas","element","error","canvas","reader","FileReader","img","drawImage","onerror","target","result","readAsDataURL","files"],"mappings":";;;;;;AAAA;;;;;;;AAOA,AAAe,SAASA,MAAT,GAA0D;MAA1CC,KAA0C,uEAApC,GAAoC;MAA/BC,MAA+B,uEAAxB,GAAwB;MAAnBC,OAAmB,uEAAX,SAAW;;;OAEnEC,EAAL,GAAUC,SAASC,aAAT,CAAuB,QAAvB,CAAV;OACKC,GAAL,GAAW,KAAKH,EAAL,CAAQI,UAAR,CAAmB,IAAnB,CAAX;;OAEKJ,EAAL,CAAQH,KAAR,GAAgBA,KAAhB;OACKG,EAAL,CAAQF,MAAR,GAAiBA,MAAjB;;OAEKK,GAAL,CAASE,SAAT,GAAqBN,OAArB;OACKI,GAAL,CAASG,QAAT,CAAkB,CAAlB,EAAqB,CAArB,EAAwBT,KAAxB,EAA+BC,MAA/B;;;AChBD;;;;;;AAMA,AAAO,SAASS,SAAT,CAAmBC,GAAnB,EACP;QACQ,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAa;MAC3BF,GAAJ,EACA;OACKG,QAAQ,IAAIC,KAAJ,EAAZ;;SAEMC,MAAN,GAAe,UAASC,CAAT,EACf;YACSH,KAAR;IAFD;SAIMI,OAAN,GAAgB,UAASD,CAAT,EAChB;YACS,IAAR;IAFD;;WAKQE,IAAR,CAAaR,GAAb;SACMS,YAAN,CAAmB,aAAnB,EAAkC,WAAlC;SACMT,GAAN,GAAYA,GAAZ;GAfD,MAkBA;WACS,IAAR;;EApBK,CAAP;;;ACRM,IAAMU,OAAO;;UAEV,GAFU;SAGX,KAHW;QAIZ,GAJY;SAKX,GALW;WAMT,CANS;UAOV;;CAPH;;ACKP;;;;;AAKA,SAASC,WAAT,CAAqBC,OAArB,EAA8B;;;KAGzBC,SAASC,OAAOC,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAAuCJ,OAAvC,CAAb;;SAGQK,GAAR,CAAY,SAAZ,EAAuBJ,MAAvB;;MAEKK,IAAL,GAAY,YACZ,EADA;;;;;;;;;;MAaKC,WAAL,GAAmB,UAASnB,GAAT,EAAcY,OAAd,EACnB;;WAEUE,OAAOC,MAAP,CAAc,EAAd,EAAkBF,MAAlB,EAA0BD,OAA1B,CAAT;;;SAGO,IAAIX,OAAJ,CAAY,UAASC,OAAT,EAAkBkB,MAAlB,EAA0B;YAC5C,CAAiBpB,GAAjB,EAAsBqB,IAAtB,CAA2B,UAASlB,KAAT,EAAgB;aACjCmB,aAAT,CAAuB,MAAvB,EAA+BC,WAA/B,CAA2CpB,KAA3C;IADD;GADM,CAAP;EAND;;;;;;;;;;MAqBKqB,YAAL,GAAoB,UAASC,OAAT,EAAkBb,OAAlB,EACpB;WACUc,KAAT,CAAepB,CAAf,EACA;WACSW,GAAR,CAAY,aAAZ;;;MAGGU,SAAS,IAAb;SACO,IAAI1B,OAAJ,CAAY,UAASC,OAAT,EAAkBkB,MAAlB,EAA0B;OACtCQ,SAAS,IAAIC,UAAJ,EAAf;UACOxB,MAAP,GAAgB,UAASC,CAAT,EAChB;QACOwB,MAAM,IAAI1B,KAAJ,EAAZ;QACIC,MAAJ,GAAa,YACb;cACU,IAAIjB,MAAJ,CAAW0C,IAAIzC,KAAf,EAAsByC,IAAIxC,MAA1B,EAAkCuB,OAAOtB,OAAzC,CAAT;YACOI,GAAP,CAAWoC,SAAX,CAAqBD,GAArB,EAA0B,CAA1B,EAA6B,CAA7B;aACQH,MAAR;KAJD;QAMIK,OAAJ,GAAcN,KAAd;QACI1B,GAAJ,GAAUM,EAAE2B,MAAF,CAASC,MAAnB;IAVD;UAYOF,OAAP,GAAiBN,KAAjB;UACOS,aAAP,CAAqBV,QAAQQ,MAAR,CAAeG,KAAf,CAAqB,CAArB,CAArB;GAfM,CAAP;EARD;;;;;;;;;"}
{"version":3,"file":"ResizeImage.js","sources":["../src/parts/Canvas.js","../src/parts/events.js","../src/parts/defaultOptions.js","../src/ResizeImage.js"],"sourcesContent":["/**\n * Canvas\n *\n * @param {Number} width\n * @param {Number} height\n * @param {String} bgColor\n */\nexport default function Canvas(width=320, height=240, bgColor='#ffffff') {\n\n\tthis.el = document.createElement('canvas');\n\tthis.ctx = this.el.getContext('2d');\n\n\tthis.el.width = width;\n\tthis.el.height = height;\n\n\tthis.ctx.fillStyle = bgColor;\n\tthis.ctx.fillRect(0, 0, width, height);\n\n}\n","/**\n * load image\n *\n * @param {String} src\n * @return {Promise}\n */\nexport function loadImage(src)\n{\n\treturn new Promise((resolve) => {\n\t\tif (src)\n\t\t{\n\t\t\tlet image = new Image();\n\n\t\t\timage.onload = function(e)\n\t\t\t{\n\t\t\t\tresolve(image);\n\t\t\t};\n\t\t\timage.onError = function(e)\n\t\t\t{\n\t\t\t\tresolve(null);\n\t\t\t};\n\n\t\t\tconsole.warn(src);\n\t\t\timage.setAttribute('crossOrigin', 'anonymous');\n\t\t\timage.src = src;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tresolve(null);\n\t\t}\n\t});\n}","export const base = {\n\n\tquality: .75,\n\tformat: 'jpg', // png,jpg\n\twidth: 320,\n\theight: 240,\n\treSample: 2,\n\tbgColor: '#ff0000',\n\n};","import Canvas from './parts/Canvas';\nimport * as events from './parts/events';\nimport * as defaultOptions from './parts/defaultOptions';\n\n\n/**\n * Resize image\n *\n * @param {Object} options\n */\nfunction ResizeImage(options) {\n\n\t// assign options\n\tlet option = Object.assign({}, defaultOptions.base, options);\n\tconsole.warn('options', option);\n\n\t/**\n\t * Play convert\n\t * 이미지 주소로 캔버스로 변환\n\t *\n\t * @param {String|Object} src\n\t * @param {Object} options\n\t * @return {Promise}\n\t */\n\tthis.play = function(src, options)\n\t{\n\t\t// TODO : src가 문자인지 첨부파일 폼 데이터인지 구분하기\n\t\t// TODO : canvas로 변환하기\n\t\t// TODO : 리샘플링 수치에 따라 이미지 리사이즈 반복하기\n\n\t\t// assign options\n\t\toption = Object.assign({}, option, options);\n\n\t\tconsole.log('action play');\n\n\t\tif (typeof src === 'string')\n\t\t{\n\t\t\t// image url\n\t\t}\n\t\telse if (typeof src === 'object')\n\t\t{\n\t\t\t// input[type=file] form\n\t\t\tconsole.log(src.files);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// TODO : error처리\n\t\t}\n\t};\n\n\t/**\n\t * Image source to canvas\n\t * 이미지 주소로 캔버스로 변환\n\t *\n\t * @param {String} src\n\t * @return {Promise}\n\t */\n\tthis.srcToCanvas = function(src)\n\t{\n\t\t// TODO : 이미지 url로 입력했을때 이미지를 가져와서 리사이즈를 하기\n\t\treturn new Promise(function(resolve, reject) {\n\t\t\tevents.loadImage(src).then(function(image) {\n\t\t\t\tdocument.querySelector('main').appendChild(image);\n\t\t\t});\n\t\t});\n\t};\n\n\t/**\n\t * Upload to image\n\t * 첨부로 가져온 이미지를 캔버스로 변환\n\t *\n\t * @param {HTMLElement} element\n\t * @return {Promise}\n\t */\n\tthis.formToCanvas = function(element)\n\t{\n\t\tlet canvas = null;\n\t\treturn new Promise(function(resolve, reject) {\n\t\t\tfunction error(e)\n\t\t\t{\n\t\t\t\tconsole.log('error event');\n\t\t\t\treject();\n\t\t\t}\n\n\t\t\tconst reader = new FileReader();\n\t\t\treader.onload = function(e)\n\t\t\t{\n\t\t\t\tconst img = new Image();\n\t\t\t\timg.onload = function()\n\t\t\t\t{\n\t\t\t\t\tcanvas = new Canvas(img.width, img.height, option.bgColor);\n\t\t\t\t\tcanvas.ctx.drawImage(img, 0, 0);\n\t\t\t\t\tresolve(canvas);\n\t\t\t\t};\n\t\t\t\timg.onerror = error;\n\t\t\t\timg.src = e.target.result;\n\t\t\t};\n\t\t\treader.onerror = error;\n\t\t\treader.readAsDataURL(element.target.files[0]);\n\t\t});\n\t};\n\n}\n\n\nexport default ResizeImage;"],"names":["Canvas","width","height","bgColor","el","document","createElement","ctx","getContext","fillStyle","fillRect","loadImage","src","Promise","resolve","image","Image","onload","e","onError","warn","setAttribute","base","ResizeImage","options","option","Object","assign","defaultOptions","play","log","files","srcToCanvas","reject","then","querySelector","appendChild","formToCanvas","element","canvas","error","reader","FileReader","img","drawImage","onerror","target","result","readAsDataURL"],"mappings":"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"}